<!-- This component is used to retrieve caregiver data, access patient information, and create cases based on the account settings. -->
<template>
	<div class="container" data-scroll-target data-it-uid={userId}>

		<template if:true={showDiv}>
			<div class="toast">
				<p class="para"><img class="img4" src={rightimg}>&nbsp;&nbsp;Almost thereâ€¦ We'll be in touch soon to
					help you access your personal information. </p>
				<div class="notify">
					<button class="buttonclass btncls" title="Close" onclick={handleclose}>
						&times;
					</button>
				</div>
			</div>
		</template>
		<template if:true={updatePopup}>
			<div class="toast">
				<p class="para"><img class="img4" src={rightimg}>&nbsp;&nbsp;Patient's information updated successfully.
				</p>
				<div class="notify">
					<button class="buttonclass btncls" title="Close" onclick={handleclose}>
						&times;
					</button>
				</div>
			</div>
		</template>
		<template if:true={showDiv1}>
			<div class="toast">
				<p class="para"><img class="img4" src={rightimg}>&nbsp;&nbsp;Just one more step. We'll be in touch soon
					to help you delete your account.</p>
				<div class="notify">
					<button class="buttonclass btncls" title="Close" onclick={handleclose}>
						&times;
					</button>
				</div>
			</div>
		</template>

		<div class='mainclass'>
			<div class="patientinfobox">
				<h2 class="size">Patient Information</h2>
				<div class="QuickLinks1">
					<div class="display">
						<h3>QuickLink</h3>
						<div> <lightning-icon if:true={down} icon-name="utility:chevrondown"
								alternative-text="Connected" size="xx-small" title="xx-small size"
								onclick={click}></lightning-icon>
							<lightning-icon if:true={up} icon-name="utility:chevronup" alternative-text="Connected"
								size="xx-small" onclick={notclick} title="xx-small size"></lightning-icon>
						</div>
					</div>
					<span if:true={touch}>
						<ul class="quick-links-list">
							<li class="li active">
								<div class="bullet bullet-active"></div>
								<a href="#1" class="a-tag">Personal Information</a>
							</li>
							<li class="li">
								<div class="bullet"></div>
								<a href="#2" class="a-tag">Communication Details</a>
							</li>
							<li class="li">
								<div class="bullet"></div>
								<a href="#3" class="a-tag">Address</a>
							</li>
							<li class="li">
								<div class="bullet"></div>
								<a href="#4" class="a-tag">Account Settings</a>
							</li>
						</ul>

					</span>
				</div>
				<div class="slds-p-around_medium">

					<div class="slds-col">
						<div class="fieldwidth" id="1">

							<h1 class="h1 color">Personal Information</h1>


							<br>

							<div class="input-div">
								<label for="FirstName" data-field="FirstName" class="input-label">First Name*</label>
								<lightning-input class="textInput" field-name="FirstName" data-field="FirstName"
									value={patientFirstName} onpaste={handlePaste} onkeydown={handleKeyDown1} disabled={isFirstNameDisabled}
									onchange={handleFieldChange} placeholder="Enter last name" variant="label-hidden">
								</lightning-input>
								<span class="slds-form-element__help" if:true={firstNameerrorMessag}>
									<img src={Warningicon}>{label.firstname}
								</span>

							</div>

						</div>
					</div>


					<div class="input-div">
						<label for="LastName" data-field="LastName" class="input-label">Last Name*</label>
						<lightning-input field-name="LastName" data-field="LastName" onkeydown={handleKeyDown1}
							value={patientLastName} id="LastName" variant="label-hidden" class="textInput"
							onchange={handlelastname} onpaste={handlePaste} disabled={isLastNameDisabled}
							placeholder="Enter last name"></lightning-input>
						<span class="slds-form-element__help" if:true={lastnameerrorMessage}>
							<img src={Warningicon}>
							{label.lastname}
						</span>
					</div>

					<div class="input-div">
						<label for="Birthdate" data-field="Birthdate" class="input-label">Date of Birth*</label>
						<lightning-input field-name="BI_PSP_Birthdate__c" label="Date of Birth" type="date"
							onchange={agecalculationEvent} value={patientDOB} data-field="Birthdate" class="textInput"
							disabled={isDOBDisabled} variant="label-hidden" placeholder="DD/MM/YYYY"></lightning-input>
						<span if:true={minorerror} class="slds-form-element__help"><lightning-icon
								icon-name='utility:warning' alternative-text='warning' variant='error' size='x-small'
								title='warning' class="error-icon"></lightning-icon>{label.minor}</span>
						<span if:true={minorerror2} class="slds-form-element__help"><lightning-icon
								icon-name='utility:warning' alternative-text='warning' variant='error' size='x-small'
								title='warning' class="error-icon"></lightning-icon>{label.abovedate}</span>
						<span if:true={minorerror3} class="slds-form-element__help"><lightning-icon
								icon-name='utility:warning' alternative-text='warning' variant='error' size='x-small'
								title='warning' class="error-icon"></lightning-icon>{label.futuredate}</span>
						<span if:true={doberrorMessage} class="slds-form-element__help">
							<img src={Warningicon}> {label.dob}
						</span>
					</div>

					<div class="input-div">
						<label class="input-label " data-field="relationship">Gender*</label>
						<lightning-combobox label="Relationship" name="CaregiverRelationship" placeholder="Select"
							data-field="relationship" value={relations} options={leadPmc} onchange={relationshipEvent}
							disabled={isGenderDisabled} class="textInput" variant="label-hidden">
						</lightning-combobox>
						<div class="slds-form-element__help" if:true={relationshiperrorMessage}>
							<img src={Warningicon}>
							<span class="slds-form-element__helps">{label.gender}</span>
						</div>
					</div>

					<div class="slds-col" if:false={phoneNumberMandatory}>
						<div class="fieldwidth" id="2">
							<br>
							<h1 class="h1 color">Communication Details</h1>
							<br>
							<div class="input-div">
								<label for="email" data-field="email" class="input-label">E-mail*</label>

								<span><lightning-input variant="label-hidden" class="textInput" field-name="PersonEmail"
										data-field="email" value={patientEmail} onchange={handle_Email} disabled=false>
									</lightning-input></span>
								<div class="slds-form-element__help" if:true={emailerrorMessage}><img
										src={Warningicon}>{label.email}</div>

							</div>
							<div class="input-div">
								<label for="phn" data-field="phone" class="input-label">Phone Number*</label>
								<span><lightning-input class="textInput" variant="label-hidden" field-name="Phone"
										data-field="phone" maxlength="16" onkeydown={handleKeyDown}
										onkeypress={validatePhoneInput} value={patientMobilePhone}
										onchange={handleFielphone} onpaste={handlePaste} disabled={isMobilePhoneDisabled}
										placeholder="Enter Phone number"></lightning-input></span>
								<div class="slds-form-element__help" if:true={phoneerrorMessage}><img
										src={Warningicon}>{label.phone}</div>
								<div class="slds-form-element__help" if:true={MobileerrorMessage}><img
										src={Warningicon}>{label.mobile}</div>

							</div>

							<div class="input-div">
								<label class="input-label" data-field="conPmc">Preferred Mode of Communication*</label>
								<lightning-combobox options={preffer} value={preferredCommunication}
									onchange={handlePmcChange} variant="label-hidden" class="textInput"
									data-field="conPmc" disabled={isPOMDisabled}
									placeholder="Enter Preferred mode of communication"></lightning-combobox>
								<div class="slds-form-element__help" if:true={conPmcErrorMessage}>

									<span class="slds-form-element__helps">
										<img src={Warningicon}> {label.preferredcontactmethod}
									</span>
								</div>
							</div>
						</div>
					</div>

					<div class="fieldwidth" id="3">
						<br>
						<h1 class="h1 color">Address</h1>
						<br>

						<div class="input-div">
							<label data-field="country" class="input-label">Country*</label>
							<lightning-combobox class="textInput" name="Country" label="Country" data-field="country"
								value={country} placeholder="Select a Country" variant="label-hidden"
								options={countryCode} onchange={handleFielcountry} disabled={isMaillingCountryDisabled}>
							</lightning-combobox>
							<div class="slds-form-element__help" if:true={countrycodeMessage}>
								<img src={Warningicon}>{label.country}
							</div>
						</div>
						<div class="input-div">
							<label data-field="state" class="input-label">State*</label>
							<lightning-combobox class="textInput" name="Country" label="Country" data-field="state"
								value={state} placeholder="Select a state" variant="label-hidden" options={StateCode}
								onchange={handleFieldstate} disabled={isMaillingStateDisabled}>
							</lightning-combobox>
							<div class="slds-form-element__help" if:true={statecodeMessage}>
								<img src={Warningicon}>{label.state}
							</div>
						</div>


						<div class="input-div">
							<label for="c" data-field="city" class="input-label">City*</label>
							<span><lightning-input class="textInput" variant="label-hidden"
									field-name="PersonMailingCity" data-field="city" value={patientCity}
									onchange={handleFieldCity} disabled={isMaillingCityDisabled}> </lightning-input>
							</span>
							<div class="slds-form-element__help" if:true={cityMessage}><img
									src={Warningicon}>{label.city}</div>
						</div>

						<div class="input-div">
							<label for="s" data-field="street" class="input-label">Street Address*</label>
							<span><lightning-input class="textInput" variant="label-hidden"
									field-name="PersonMailingStreet" data-field="street" value={patientStreet}
									onchange={handleFieldstreet} disabled={isMaillingStreetDisabled}>
								</lightning-input></span>
							<div class="slds-form-element__help" if:true={streetMessage}><img
									src={Warningicon}>{label.street}</div>
						</div>
						<div class="input-div">
							<label for="pc" data-field="zipcode" class="input-label">Zip Code*</label>
							<span><lightning-input class="textInput" variant="label-hidden"
									field-name="PersonMailingPostalCode" data-field="zipcode" value={patientZipCode}
									onchange={handleFieldcode} disabled={isMaillingPostalcodeDisabled}>
								</lightning-input></span>
							<div class="slds-form-element__help" if:true={postalCodeMessage}><img
									src={Warningicon}>{label.pincode}</div>
							<div class="slds-form-element__help" if:true={validerrorMessage}><img
									src={Warningicon}>{label.validPincode}</div>
						</div>
					</div>

					<div class="slds-m-top_medium">
						<div class="slds-c-button-color-background">
							<div class="slds-c-button-text-color">
								<button class="slds-button" onclick={handle_Success}
									data-it-button="myprofile: Save Changes">Save Changes</button>
							</div>
						</div>
					</div>

				</div>

				<div class="accsettings" id="4" if:true={isAdult}>
					<br />
					<h1 class="h1">Account Settings</h1>
					<br />
					<div class="msg">
						<b> If you wish to delete this account, click on the following link.</b>
					</div>
					<div class="message" if:true={DeleteMessage}>
						<img src={Boxedicon} class="boxedimg">
						<p>Your request for deleting the account is under process.We'll get in touch with you soon</p>

					</div>
					<!-- Used for creating a case for delete access for patient -->
					<button class={colorchanage} id="buttonD" onclick={handleDeletPopup}
						disabled={isButtonDeleteDisabled} data-it-button="myprofile: Delete Account">
						<b> Delete Account </b>
					</button>
					<br />
					<div class="msg"><b>If you want to access personal information, click on the following link.</b>
					</div>
					<div class="message" if:true={accessmessage}>
						<img src={Boxedicon} class="boxedimg">
						<p>Your request to access personal information is under process. We'll get in touch with you
							soon</p>
					</div>
					<!-- Used for creating a case for request access for patient -->
					<button class={colorchnage} onclick={handleAccessPopup} disabled={isAccessButtonDisabled}
						data-it-button="myprofile: Request Access">
						<b> Request Access</b>
					</button>
				</div>
			</div>

			<div class="Ql">
				<h3 class="h1">Quick Links</h3>
				<ul class="ULClass">
					<li class="li active">
						<div class="bullet bullet-active"></div>
						<div class="Piclass">
							<a href="#1" class="a-tag">Personal Information</a>
						</div>
					</li>
					<li class="li" if:false={phoneNumberMandatory}>

						<div class="bullet"></div>
						<div class="Piclass">
							<a href="#2" class="a-tag">Communication Details</a>
						</div>

					</li>
					<li class="li">
						<div class="bullet"></div>
						<div class="Piclass">
							<a href="#3" class="a-tag">Address</a>
						</div>
					</li>
					<li class="li">

						<div class="bullet"></div>
						<div class="Piclass">
							<a href="#4" class="a-tag">Account Settings</a>

						</div>
					</li>
				</ul>
			</div>
		</div>
		<template if:true={isDeletePopupOpen}>
			<div class="popup">
				<div class="popup-content">
					<lightning-button-icon class="close-icon" icon-name="utility:close" alternative-text="Close"
						onclick={handleDeletPopup}>
					</lightning-button-icon>
					<div class="popubhead">
						<div class="popup-heading">Request account to be deleted</div>
						<div class="popup-confirmation">
							Are you sure you want to request access to delete this
							<br />
							account?
						</div>
						<div class="btn">
							<button data-value="No" class="outlined-button OTBTN" onclick={handleDeletPopup}>No</button>
							&nbsp;&nbsp;
							<button data-value="Yes" class="save-button" onclick={handleYesButtonClick}>Yes</button>

						</div>
					</div>
				</div>
			</div>
		</template>
		<template if:true={isAccessPopupOpen}>
			<div class="popup">
				<div>
					<div class="popup-content">
						<lightning-button-icon class="close-icon" icon-name="utility:close" alternative-text="Close"
							onclick={handleAccessPopup}>
						</lightning-button-icon>
						<div class="popubhead">
							<div class="popup-heading">Request access to personal<br /> information</div>
							<div class="popup-confirmation">
								Do you want to send a request to access personal<br /> information?
							</div>
							<div class="btn">
								<button data-value="No" class="outlined-button OTBTN"
									onclick={handleAccessPopup}>No</button>
								&nbsp;&nbsp;
								<button data-value="Yes" class="save-button"
									onclick={handleYesButtonClick2}>Yes</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</template>
	</div>
</template>